class GameTest { constructor() { this.tests = []; this.passed = 0; this.failed = 0; } test(name, fn) { this.tests.push({ name, fn }); } async run() { console.log("ğŸ® Crystal Guardians ãƒ†ã‚¹ãƒˆé–‹å§‹"); for (const test of this.tests) { try { await test.fn(); console.log(`âœ… ${test.name}`); this.passed++; } catch (error) { console.error(`âŒ ${test.name}: ${error.message}`); this.failed++; } } console.log(`ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ: ${this.passed}ä»¶æˆåŠŸ, ${this.failed}ä»¶å¤±æ•—`); } assert(condition, message) { if (!condition) { throw new Error(message); } } assertEqual(actual, expected, message) { if (actual !== expected) { throw new Error(`${message}: æœŸå¾…å€¤ ${expected}, å®Ÿéš›ã®å€¤ ${actual}`); } } } const gameTest = new GameTest(); gameTest.test("ã‚²ãƒ¼ãƒ åˆæœŸåŒ–", () => { if (typeof Game !== "undefined") { const game = new Game(); gameTest.assert(game.gold === 200, "åˆæœŸã‚´ãƒ¼ãƒ«ãƒ‰ã¯200G"); gameTest.assert(game.wave === 1, "åˆæœŸã‚¦ã‚§ãƒ¼ãƒ–ã¯1"); gameTest.assert(game.enemiesReached === 0, "åˆ°é”ã—ãŸæ•µã®æ•°ã¯0"); gameTest.assert(game.gameState === "playing", "ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã¯playing"); } }); gameTest.test("ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½œæˆ", () => { if (typeof Warrior !== "undefined") { const warrior = new Warrior(100, 100); gameTest.assert(warrior.cost === 100, "ã‚¦ã‚©ãƒªã‚¢ãƒ¼ã®ã‚³ã‚¹ãƒˆã¯100G"); gameTest.assert(warrior.x === 100, "Xåº§æ¨™ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹"); gameTest.assert(warrior.y === 100, "Yåº§æ¨™ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹"); gameTest.assert(warrior.level === 1, "åˆæœŸãƒ¬ãƒ™ãƒ«ã¯1"); } }); gameTest.test("æ•µç”Ÿæˆ", () => { if (typeof BasicEnemy !== "undefined") { const enemy = new BasicEnemy(); gameTest.assert(enemy.hp > 0, "æ•µã®HPãŒ0ã‚ˆã‚Šå¤§ãã„"); gameTest.assert(enemy.speed > 0, "æ•µã®é€Ÿåº¦ãŒ0ã‚ˆã‚Šå¤§ãã„"); gameTest.assert(enemy.reward > 0, "æ•µã®å ±é…¬ãŒ0ã‚ˆã‚Šå¤§ãã„"); } }); gameTest.test("ã‚»ãƒ¼ãƒ–æ©Ÿèƒ½", () => { if (typeof SaveManager !== "undefined") { const saveManager = new SaveManager(); const gameData = { gold: 500, wave: 5, characters: [] }; saveManager.save(gameData); const loaded = saveManager.load(); gameTest.assertEqual(loaded.gold, 500, "ã‚´ãƒ¼ãƒ«ãƒ‰ãŒæ­£ã—ãä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ã•ã‚Œã‚‹"); gameTest.assertEqual(loaded.wave, 5, "ã‚¦ã‚§ãƒ¼ãƒ–ãŒæ­£ã—ãä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ã•ã‚Œã‚‹"); } }); if (typeof window !== "undefined") { window.GameTest = GameTest; window.gameTest = gameTest; setTimeout(() => gameTest.run(), 1000); }
